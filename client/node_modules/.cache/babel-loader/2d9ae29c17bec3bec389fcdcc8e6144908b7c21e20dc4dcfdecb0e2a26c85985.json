{"ast":null,"code":"import _objectSpread from\"/Users/roope/Visual Studio Code/Full-Stack-Open-Osa3/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import personService from'../services/persons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PersonForm=function PersonForm(_ref){var newName=_ref.newName,setNewName=_ref.setNewName,newNumber=_ref.newNumber,setNewNumber=_ref.setNewNumber,persons=_ref.persons,setPersons=_ref.setPersons,setMessage=_ref.setMessage;var addNumber=function addNumber(event){event.preventDefault();console.log('button clicked',event.target);console.log(persons.some(function(person){return person.name===newName;}));var person=persons.find(function(p){return p.name===newName;});if(person&&window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var changedPerson=_objectSpread(_objectSpread({},person),{},{number:newNumber});personService.update(person.id,changedPerson).then(function(response){console.log(response);setPersons(persons.map(function(p){return p.id!==person.id?p:response.data;}));}).then(function(){setMessage(\"Updated \".concat(person.name));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){console.log(error);if(error.response.status===404){setMessage(\"Information of \".concat(person.name,\" has already been removed from server\"));setTimeout(function(){setMessage(null);},5000);}else{setMessage(\"Error updating \".concat(person.name));setTimeout(function(){setMessage(null);},5000);}});setNewName('');setNewNumber('');}else{var personObject={name:newName,number:newNumber};personService.create(personObject).then(function(response){console.log(response);setPersons(persons.concat(response.data));}).then(function(){setMessage(\"Added \".concat(personObject.name));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){console.log(error.response.data);setMessage(\"Error adding \".concat(personObject.name));setTimeout(function(){setMessage(null);},5000);});setPersons(persons.concat(personObject));setNewName('');setNewNumber('');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:addNumber,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:function onChange(e){return setNewName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newNumber,onChange:function onChange(e){return setNewNumber(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};export default PersonForm;","map":{"version":3,"names":["React","personService","jsx","_jsx","jsxs","_jsxs","PersonForm","_ref","newName","setNewName","newNumber","setNewNumber","persons","setPersons","setMessage","addNumber","event","preventDefault","console","log","target","some","person","name","find","p","window","confirm","concat","changedPerson","_objectSpread","number","update","id","then","response","map","data","setTimeout","catch","error","status","personObject","create","onSubmit","children","value","onChange","e","type"],"sources":["/Users/roope/Visual Studio Code/Full-Stack-Open-Osa3/client/src/components/PersonForm.js"],"sourcesContent":["import React from 'react';\nimport personService from '../services/persons';\n\nconst PersonForm = ({ newName, setNewName, newNumber, setNewNumber, persons, setPersons, setMessage }) => {\n\n    const addNumber = (event) => {\n        event.preventDefault()\n        console.log('button clicked', event.target)\n        console.log(persons.some(person => person.name === newName))\n        const person = persons.find(p => p.name === newName)\n        if (person && window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n            const changedPerson = { ...person, number: newNumber }\n            personService.update(person.id, changedPerson).then(response => {\n                console.log(response)\n                setPersons(persons.map(p => p.id !== person.id ? p : response.data))\n            }).then(() => {\n                setMessage\n                    (`Updated ${person.name}`)\n                setTimeout(() => {\n                    setMessage(null)\n                }, 5000)\n            }).catch(error => {\n                console.log(error)\n                if (error.response.status === 404) {\n                    setMessage\n                        (`Information of ${person.name} has already been removed from server`)\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 5000)\n\n                } else {\n                    setMessage\n                        (`Error updating ${person.name}`)\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 5000)\n                }\n            })\n\n            setNewName('')\n            setNewNumber('')\n        } else {\n            const personObject = {\n                name: newName,\n                number: newNumber\n            }\n            personService.create(personObject).then(response => {\n                console.log(response)\n                setPersons(persons.concat(response.data))\n            }).then(() => {\n                setMessage\n                    (`Added ${personObject.name}`)\n                setTimeout(() => {\n                    setMessage(null)\n                }, 5000)\n            }).catch(error => {\n                console.log(error.response.data)\n                setMessage\n                    (`Error adding ${personObject.name}`)\n                setTimeout(() => {\n                    setMessage(null)\n                }, 5000)\n            })\n            setPersons(persons.concat(personObject))\n            setNewName('')\n            setNewNumber('')\n        }\n    }\n    return (\n        <form onSubmit={addNumber}>\n            <div>\n                name: <input value={newName} onChange={e => setNewName(e.target.value)} />\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={e => setNewNumber(e.target.value)} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}